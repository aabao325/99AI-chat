
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as E}from"./index.vue_vue_type_script_setup_true_lang-BzQbPy9H.js";import{d as F,m as $,r as v,a as H,p as d,g as V,c as k,b as e,w as l,h,F as B,s as P,i as T,N as w,e as r,G as I,j as L,_ as D,k as q}from"./index-BhXS9pCW.js";import{a as A}from"./config-yjJZQ9p8.js";const W=r("div",{class:"flex items-center gap-4"},"基础设置",-1),z=r("div",{class:"text-sm/6"},[r("div",null," 全局配置用于对话标题生成、生成提问建议、提示词翻译等内置操作。模型不配置 Url 或 Key 时，也会使用全局配置。 "),r("div",null,[h(" API 中转推荐 "),r("a",{href:"https://api.lightai.io",target:"_blank",style:{"margin-right":"5px"}},"https://api.lightai.io"),h("，提供 AI 接口聚合管理服务，一站式接入各种 AI 模型，无强制绑定关系，可按需选择。 ")]),r("div",null," 深度思考模型用于模型的深度思考，需在模型配置中开启深度思考模式。 "),r("div",null,[r("a",{href:"https://github.com/vastxie/99AIPlugin",target:"_blank"},"联网插件"),h("需自行部署，插件地址和 Key 按照插件部署时的配置填写。 ")])],-1),J=r("div",{style:{width:"250px"}},[r("p",null,"开启后，新建对话模型将继承上一次对话所使用的模型")],-1),Q=r("div",{style:{width:"250px"}},[r("p",null,"开启后，将使用全局模型在每次对话后，生成提问建议")],-1),X=r("div",{class:"ml-2"},"秒",-1),Y=r("div",{style:{width:"250px"}},[r("p",null,"模型 Temperature 设置，一般情况无需调整")],-1),Z=F({__name:"baseSetting",setup(ee){const o=$({openaiBaseUrl:"",openaiBaseKey:"",deepThinkingModel:"deepseek-reasoner",deepThinkingUrl:"",deepThinkingKey:"",openaiTimeout:"",openaiBaseModel:"gpt-4o-mini",isGeneratePromptReference:0,systemPreMessage:"",isModelInherited:1,pluginUrl:"",pluginKey:"",openaiTemperature:1}),R=[{value:"https://api.deepseek.com",label:"【DeepSeek 官方】https://api.deepseek.com"},{value:"https://dashscope.aliyuncs.com/compatible-mode",label:"【阿里云百炼】https://dashscope.aliyuncs.com/compatible-mode"},{value:"https://api.lkeap.cloud.tencent.com",label:"【腾讯云知识引擎】https://api.lkeap.cloud.tencent.com"},{value:"https://api.lightai.io",label:"【LightAI API】https://api.lightai.io"},{value:"",label:"【其他】填写后选择"}],C=[{value:"https://open.bigmodel.cn/api/paas/v4/tools",label:"【智谱 web-search-pro】"}];v([{label:"Alloy",value:"alloy"},{label:"Echo",value:"echo"},{label:"Fable",value:"fable"},{label:"Onyx",value:"onyx"},{label:"Nova",value:"nova"},{label:"Shimmer",value:"shimmer"}]);const G=v({openaiBaseUrl:[{required:!1,trigger:"blur",message:"请填写 AI 的请求地址"}],isGeneratePromptReference:[{required:!1,trigger:"blur",message:"是否生成提示词参考"}],isModelInherited:[{required:!1,trigger:"blur",message:"是否继承模型"}],openaiTimeout:[{required:!1,trigger:"blur",message:"请填写openai的超时时间（单位ms）"}],openaiBaseModel:[{required:!1,trigger:"blur",message:"请填写全局模型，用于后台一些静默性赋能操作"}],pluginUrl:[{required:!1,trigger:"blur",message:"请填写联网插件地址"}],pluginKey:[{required:!1,trigger:"blur",message:"请填写联网插件 Key"}],openaiTemperature:[{required:!1,trigger:"blur",message:"请填写模型 Temperature 设置，默认1"}],deepThinkingUrl:[{required:!1,trigger:"blur",message:"请填写深度思考模型地址"}],deepThinkingKey:[{required:!1,trigger:"blur",message:"请填写深度思考模型 Key"}],deepThinkingModel:[{required:!1,trigger:"blur",message:"请填写深度思考模型名称"}]}),U=v();async function K(){const u=await A.queryConfig({keys:["openaiBaseUrl","openaiBaseKey","openaiTimeout","openaiBaseModel","systemPreMessage","isGeneratePromptReference","isModelInherited","pluginUrl","pluginKey","openaiTemperature","deepThinkingUrl","deepThinkingKey","deepThinkingModel"]}),{openaiBaseUrl:a="",openaiBaseKey:f="",openaiTimeout:y=300,openaiBaseModel:x="gpt-4o-mini",isGeneratePromptReference:p=0,systemPreMessage:n,pluginUrl:i,pluginKey:s,openaiTemperature:c=1,deepThinkingUrl:_,deepThinkingKey:b,deepThinkingModel:m,isModelInherited:g}=u.data;Object.assign(o,{openaiBaseUrl:a,openaiBaseKey:f,openaiTimeout:y,isGeneratePromptReference:p,openaiBaseModel:x,systemPreMessage:n,pluginUrl:i,pluginKey:s,openaiTemperature:c,deepThinkingKey:b,deepThinkingUrl:_,deepThinkingModel:m,isModelInherited:g})}function N(){var u;(u=U.value)==null||u.validate(async a=>{if(a){try{await A.setConfig({settings:S(o)}),I.success("变更配置信息成功")}catch{}K()}else I.error("请填写完整信息")})}function S(u){return Object.keys(u).map(a=>({configKey:a,configVal:u[a]}))}return H(()=>{K()}),(u,a)=>{const f=L,y=D,x=E,p=d("el-input"),n=d("el-form-item"),i=d("el-col"),s=d("el-row"),c=d("el-option"),_=d("el-select"),b=d("el-switch"),m=d("el-icon"),g=d("el-tooltip"),M=d("el-input-number"),O=d("el-form"),j=d("el-card");return V(),k("div",null,[e(x,null,{title:l(()=>[W]),content:l(()=>[z]),default:l(()=>[e(y,{text:"",outline:"",onClick:N},{default:l(()=>[e(f,{name:"i-ri:file-text-line"}),h(" 保存设置 ")]),_:1})]),_:1}),e(j,{style:{margin:"20px"}},{default:l(()=>[e(O,{ref_key:"formRef",ref:U,rules:G.value,model:o,"label-width":"220px"},{default:l(()=>[e(s,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"全局地址",prop:"openaiBaseUrl","label-width":"120px"},{default:l(()=>[e(p,{modelValue:o.openaiBaseUrl,"onUpdate:modelValue":a[0]||(a[0]=t=>o.openaiBaseUrl=t),placeholder:"默认地址: https://api.openai.com 第三方代理推荐: https://api.lightai.io",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"全局 Key",prop:"openaiBaseKey","label-width":"120px"},{default:l(()=>[e(p,{modelValue:o.openaiBaseKey,"onUpdate:modelValue":a[1]||(a[1]=t=>o.openaiBaseKey=t),placeholder:"请填写模型全局 Key 信息，当模型 Key 为空时调用",type:"password","show-password":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"全局模型",prop:"openaiBaseModel","label-width":"120px"},{default:l(()=>[e(p,{modelValue:o.openaiBaseModel,"onUpdate:modelValue":a[2]||(a[2]=t=>o.openaiBaseModel=t),placeholder:"全局模型配置，用于后台一些静默赋能操作",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"深度思考地址",prop:"deepThinkingUrl","label-width":"120px"},{default:l(()=>[e(_,{modelValue:o.deepThinkingUrl,"onUpdate:modelValue":a[3]||(a[3]=t=>o.deepThinkingUrl=t),placeholder:"请选择或输入深度思考模型地址",clearable:"",filterable:"","allow-create":""},{default:l(()=>[(V(),k(B,null,P(R,t=>e(c,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"深度思考 Key",prop:"deepThinkingKey","label-width":"120px"},{default:l(()=>[e(p,{modelValue:o.deepThinkingKey,"onUpdate:modelValue":a[4]||(a[4]=t=>o.deepThinkingKey=t),placeholder:"请填写深度思考模型 Key",type:"password","show-password":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"深度思考模型",prop:"deepThinkingModel","label-width":"120px"},{default:l(()=>[e(p,{modelValue:o.deepThinkingModel,"onUpdate:modelValue":a[5]||(a[5]=t=>o.deepThinkingModel=t),placeholder:"请选择深度思考模型",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"联网插件地址","label-width":"120",prop:"pluginUrl"},{default:l(()=>[e(_,{modelValue:o.pluginUrl,"onUpdate:modelValue":a[6]||(a[6]=t=>o.pluginUrl=t),placeholder:"请选择或输入联网搜索使用的地址",clearable:"",filterable:"","allow-create":""},{default:l(()=>[(V(),k(B,null,P(C,t=>e(c,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"联网插件 Key","label-width":"120",prop:"pluginKey"},{default:l(()=>[e(p,{modelValue:o.pluginKey,"onUpdate:modelValue":a[7]||(a[7]=t=>o.pluginKey=t),placeholder:"插件 Key",clearable:"",password:"","show-password":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"继承对话模型",prop:"isModelInherited","label-width":"120"},{default:l(()=>[e(b,{modelValue:o.isModelInherited,"onUpdate:modelValue":a[8]||(a[8]=t=>o.isModelInherited=t),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(g,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[J]),default:l(()=>[e(m,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(T(w))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"生成提问建议",prop:"isGeneratePromptReference","label-width":"120"},{default:l(()=>[e(b,{modelValue:o.isGeneratePromptReference,"onUpdate:modelValue":a[9]||(a[9]=t=>o.isGeneratePromptReference=t),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(g,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[Q]),default:l(()=>[e(m,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(T(w))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"超时时间",prop:"openaiTimeout","label-width":"120px"},{default:l(()=>[e(M,{modelValue:o.openaiTimeout,"onUpdate:modelValue":a[10]||(a[10]=t=>o.openaiTimeout=t),"controls-position":"right",min:60,max:1200,step:5,placeholder:"模型全局超时时间，默认300s 单位：秒（s）",clearable:""},null,8,["modelValue"]),X]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"Temperature",prop:"openaiTemperature","label-width":"120px"},{default:l(()=>[e(M,{modelValue:o.openaiTemperature,"onUpdate:modelValue":a[11]||(a[11]=t=>o.openaiTemperature=t),"controls-position":"right",min:0,max:2,step:.1,placeholder:"模型 Temperature 设置，默认1",clearable:""},null,8,["modelValue"]),e(g,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[Y]),default:l(()=>[e(m,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(T(w))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"全局头部预设",prop:"systemPreMessage","label-width":"120px"},{default:l(()=>[e(p,{modelValue:o.systemPreMessage,"onUpdate:modelValue":a[12]||(a[12]=t=>o.systemPreMessage=t),type:"textarea",rows:8,placeholder:"请填写模型全局头部预设信息！",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof q=="function"&&q(Z);export{Z as default};
