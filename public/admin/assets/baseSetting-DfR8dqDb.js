
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as R}from"./index.vue_vue_type_script_setup_true_lang-CJfM2_qy.js";import{d as C,m as G,r as V,a as N,p,g as j,c as A,b as e,w as l,h as m,i as k,N as v,e as d,G as w,j as O,_ as S,k as K}from"./index-BEgDEv_a.js";import{a as M}from"./config-C-DJme6K.js";const E=d("div",{class:"flex items-center gap-4"},"全局参数设置",-1),$=d("div",{class:"text-sm/6"},[d("div",null,[m(" 系统默认的请求地址是 "),d("a",{href:"https://api.openai.com",target:"_blank"},"https://api.openai.com"),m("，国内服务器可能无法访问，需使用自己的代理或中转。 ")]),d("div",null," 此处配置为全局配置，一些系统内置的自动服务会使用到该模型。另外，当模型不配置 Key 以及 Url 时，会使用全局配置。 "),d("div",null,[m(" API 中转推荐 "),d("a",{href:"https://api.lightai.io",target:"_blank",style:{"margin-right":"10px"}},"https://api.lightai.io"),m("，支持OpenAI，Midjourney 以及多种国内外模型，无强制绑定关系，可按需选择。 ")])],-1),H=d("div",{style:{width:"250px"}},[d("p",null,"开启后、对话模型将会继承上一次对话的模型、默认开启")],-1),F=d("div",{style:{width:"250px"}},[d("p",null,"开启后，将使用全局模型在每次对话后，生成提问建议")],-1),z=d("div",{class:"ml-2"},"秒",-1),D=C({__name:"baseSetting",setup(J){const o=G({openaiBaseUrl:"",openaiBaseKey:"",deepThinkingModel:"deepseek-reasoner",deepThinkingUrl:"",deepThinkingKey:"",openaiTimeout:"",openaiBaseModel:"gpt-4o-mini",isGeneratePromptReference:0,systemPreMessage:"",isModelInherited:1,pluginUrl:"",pluginKey:"",openaiTemperature:1});V([{label:"Alloy",value:"alloy"},{label:"Echo",value:"echo"},{label:"Fable",value:"fable"},{label:"Onyx",value:"onyx"},{label:"Nova",value:"nova"},{label:"Shimmer",value:"shimmer"}]);const B=V({openaiBaseUrl:[{required:!1,trigger:"blur",message:"请填写openai的请求地址"}],isGeneratePromptReference:[{required:!1,trigger:"blur",message:"是否生成提示词参考"}],isModelInherited:[{required:!1,trigger:"blur",message:"是否继承模型"}],openaiTimeout:[{required:!1,trigger:"blur",message:"请填写openai的超时时间（单位ms）"}],openaiBaseModel:[{required:!1,trigger:"blur",message:"请填写全局模型，用于后台一些静默性赋能操作"}],pluginUrl:[{required:!1,trigger:"blur",message:"请填写联网插件地址"}],pluginKey:[{required:!1,trigger:"blur",message:"请填写联网插件 Key"}],openaiTemperature:[{required:!1,trigger:"blur",message:"请填写模型 Temperature 设置，默认1"}],deepThinkingUrl:[{required:!1,trigger:"blur",message:"请填写深度思考模型地址"}],deepThinkingKey:[{required:!1,trigger:"blur",message:"请填写深度思考模型 Key"}],deepThinkingModel:[{required:!1,trigger:"blur",message:"请填写深度思考模型名称"}]}),T=V();async function U(){const u=await M.queryConfig({keys:["openaiBaseUrl","openaiBaseKey","openaiTimeout","openaiBaseModel","systemPreMessage","isGeneratePromptReference","isModelInherited","pluginUrl","pluginKey","openaiTemperature","deepThinkingUrl","deepThinkingKey","deepThinkingModel"]}),{openaiBaseUrl:a="",openaiBaseKey:g="",openaiTimeout:h=300,openaiBaseModel:y="gpt-4o-mini",isGeneratePromptReference:s=0,systemPreMessage:n,pluginUrl:i,pluginKey:r,openaiTemperature:f=1,deepThinkingUrl:_,deepThinkingKey:c,deepThinkingModel:b,isModelInherited:x}=u.data;Object.assign(o,{openaiBaseUrl:a,openaiBaseKey:g,openaiTimeout:h,isGeneratePromptReference:s,openaiBaseModel:y,systemPreMessage:n,pluginUrl:i,pluginKey:r,openaiTemperature:f,deepThinkingKey:c,deepThinkingUrl:_,deepThinkingModel:b,isModelInherited:x})}function P(){var u;(u=T.value)==null||u.validate(async a=>{if(a){try{await M.setConfig({settings:q(o)}),w.success("变更配置信息成功")}catch{}U()}else w.error("请填写完整信息")})}function q(u){return Object.keys(u).map(a=>({configKey:a,configVal:u[a]}))}return N(()=>{U()}),(u,a)=>{const g=O,h=S,y=R,s=p("el-input"),n=p("el-form-item"),i=p("el-col"),r=p("el-row"),f=p("el-switch"),_=p("el-icon"),c=p("el-tooltip"),b=p("el-input-number"),x=p("el-form"),I=p("el-card");return j(),A("div",null,[e(y,null,{title:l(()=>[E]),content:l(()=>[$]),default:l(()=>[e(h,{text:"",outline:"",onClick:P},{default:l(()=>[e(g,{name:"i-ri:file-text-line"}),m(" 保存设置 ")]),_:1})]),_:1}),e(I,{style:{margin:"20px"}},{default:l(()=>[e(x,{ref_key:"formRef",ref:T,rules:B.value,model:o,"label-width":"220px"},{default:l(()=>[e(r,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"请求地址",prop:"openaiBaseUrl","label-width":"120px"},{default:l(()=>[e(s,{modelValue:o.openaiBaseUrl,"onUpdate:modelValue":a[0]||(a[0]=t=>o.openaiBaseUrl=t),placeholder:"默认地址: https://api.openai.com 第三方代理推荐：https://api.lightai.io",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"全局 Key",prop:"openaiBaseKey","label-width":"120px"},{default:l(()=>[e(s,{modelValue:o.openaiBaseKey,"onUpdate:modelValue":a[1]||(a[1]=t=>o.openaiBaseKey=t),placeholder:"请填写模型全局 Key 信息，当模型 Key 为空时调用",type:"password","show-password":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"全局模型",prop:"openaiBaseModel","label-width":"120px"},{default:l(()=>[e(s,{modelValue:o.openaiBaseModel,"onUpdate:modelValue":a[2]||(a[2]=t=>o.openaiBaseModel=t),placeholder:"全局模型配置，用于后台一些静默赋能操作",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"深度思考地址",prop:"deepThinkingUrl","label-width":"120px"},{default:l(()=>[e(s,{modelValue:o.deepThinkingUrl,"onUpdate:modelValue":a[3]||(a[3]=t=>o.deepThinkingUrl=t),placeholder:"请填写深度思考模型地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"深度思考 Key",prop:"deepThinkingKey","label-width":"120px"},{default:l(()=>[e(s,{modelValue:o.deepThinkingKey,"onUpdate:modelValue":a[4]||(a[4]=t=>o.deepThinkingKey=t),placeholder:"请填写深度思考模型 Key",type:"password","show-password":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"深度思考模型",prop:"deepThinkingModel","label-width":"120px"},{default:l(()=>[e(s,{modelValue:o.deepThinkingModel,"onUpdate:modelValue":a[5]||(a[5]=t=>o.deepThinkingModel=t),placeholder:"请选择深度思考模型",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"继承对话模型",prop:"isModelInherited","label-width":"120"},{default:l(()=>[e(f,{modelValue:o.isModelInherited,"onUpdate:modelValue":a[6]||(a[6]=t=>o.isModelInherited=t),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(c,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[H]),default:l(()=>[e(_,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(k(v))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"生成提问建议",prop:"isGeneratePromptReference","label-width":"120"},{default:l(()=>[e(f,{modelValue:o.isGeneratePromptReference,"onUpdate:modelValue":a[7]||(a[7]=t=>o.isGeneratePromptReference=t),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(c,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[F]),default:l(()=>[e(_,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(k(v))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"联网插件地址","label-width":"120",prop:"pluginUrl"},{default:l(()=>[e(s,{modelValue:o.pluginUrl,"onUpdate:modelValue":a[8]||(a[8]=t=>o.pluginUrl=t),placeholder:"插件地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"联网插件 Key","label-width":"120",prop:"pluginKey"},{default:l(()=>[e(s,{modelValue:o.pluginKey,"onUpdate:modelValue":a[9]||(a[9]=t=>o.pluginKey=t),placeholder:"插件 Key",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"超时时间",prop:"openaiTimeout","label-width":"120px"},{default:l(()=>[e(b,{modelValue:o.openaiTimeout,"onUpdate:modelValue":a[10]||(a[10]=t=>o.openaiTimeout=t),"controls-position":"right",min:60,max:1200,step:5,placeholder:"openai超时时间设置、默认300s 单位：秒（s）",clearable:""},null,8,["modelValue"]),z]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"Temperature",prop:"openaiTemperature","label-width":"120px"},{default:l(()=>[e(b,{modelValue:o.openaiTemperature,"onUpdate:modelValue":a[11]||(a[11]=t=>o.openaiTemperature=t),"controls-position":"right",min:0,max:2,step:.1,placeholder:"模型 Temperature 设置，默认1",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(i,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(n,{label:"全局头部预设",prop:"systemPreMessage","label-width":"120px"},{default:l(()=>[e(s,{modelValue:o.systemPreMessage,"onUpdate:modelValue":a[12]||(a[12]=t=>o.systemPreMessage=t),type:"textarea",rows:8,placeholder:"请填写模型全局头部预设信息！",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof K=="function"&&K(D);export{D as default};
