
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.github.io
 */

import{_ as Y}from"./index.vue_vue_type_script_setup_true_lang-CJfM2_qy.js";import{d as Z,m as ee,r as _,a as le,p as i,g as m,c as k,b as e,w as l,h as g,i as b,N as h,z as x,A as q,e as n,F as D,s as R,v as te,G as A,E as ae,j as oe,_ as ne,t as se,k as K}from"./index-BEgDEv_a.js";import{a as O}from"./config-C-DJme6K.js";const ie=n("div",{class:"flex items-center gap-4"},"全局参数设置",-1),re=n("div",{class:"text-sm/6"},[n("div",null,[g(" 系统默认的请求地址是 "),n("a",{href:"https://api.openai.com",target:"_blank"},"https://api.openai.com"),g("，国内服务器可能无法访问，需使用自己的代理或中转。 ")]),n("div",null," 此处配置为全局配置，一些系统内置的自动服务会使用到该模型。另外，当模型不配置 Key 以及 Url 时，会使用全局配置。 "),n("div",null,[g(" API 中转推荐 "),n("a",{href:"https://api.lightai.io",target:"_blank",style:{"margin-right":"10px"}},"https://api.lightai.io"),g("，支持OpenAI，Midjourney 以及多种国内外模型，无强制绑定关系，可按需选择。 ")])],-1),ue=n("h5",null,"绘画配置",-1),de=n("div",{style:{width:"250px"}}," 默认会存储图片到配置的存储中、如果开启此选择则表示不保存原图到我们配置的存储上、直接反代访问原始图片、这样可以进一步节省空间、但访问速度及稳定性可能有所降低！ ",-1),me=n("div",{style:{width:"250px"}}," 开启不使用代理将直接使用重中转获取到的链接、原生discord地址国内无法访问! ",-1),pe=n("div",{style:{width:"250px"}}," 开启优化后, MJ 提示词默认会使用全局模型进行翻译/联想, 不再单独扣费, 一般中转会自带翻译, 请根据实际情况选择。 ",-1),ce=n("div",{style:{width:"250px"}}," 开启连续绘画会在使用 Dalle 绘图的时候,调用全局模型,根据上文总结绘画要求 ",-1),fe={style:{display:"flex","flex-wrap":"wrap",gap:"10px"}},_e=n("h5",null,"其他配置",-1),ge=n("div",{style:{width:"250px"}},[n("p",null," 开启后，识图时将使用 base64 格式，对于本地/存储桶 链接 API 端无法访问时建议开启 ")],-1),ve=Z({__name:"advancedSetting",setup(xe){const o=ee({mjNotSaveImg:0,mjProxyImgUrl:"",mjNotUseProxy:1,isMjTranslate:0,mjTranslatePrompt:"",isDalleChat:1,isConvertToBase64:0,openaiVoice:"",drawingStyles:""}),E=_([{label:"Alloy",value:"alloy"},{label:"Echo",value:"echo"},{label:"Fable",value:"fable"},{label:"Onyx",value:"onyx"},{label:"Nova",value:"nova"},{label:"Shimmer",value:"shimmer"}]),G=_({isMjTranslate:[{required:!1,trigger:"blur",message:"是否开启翻译/联想"}],isGeneratePromptReference:[{required:!1,trigger:"blur",message:"是否生成提示词参考"}],isDalleChat:[{required:!1,trigger:"blur",message:"是否开启连续绘画"}],openaiTemperature:[{required:!1,trigger:"blur",message:"请填写温度"}],mjTranslatePrompt:[{required:!1,trigger:"blur",message:"用于翻译 / 联想的提示词"}],openaiVoice:[{required:!1,trigger:"blur",message:"请填写openai的语音音色"}],isConvertToBase64:[{required:!1,trigger:"blur",message:"是否转换为base64"}]}),v=_(),w=_(!1),j=_(""),N=_(),S=_();async function B(){const s=await O.queryConfig({keys:["openaiBaseUrl","openaiBaseKey","openaiTimeout","openaiBaseModel","openaiTemperature","mjNotSaveImg","mjProxyImgUrl","systemPreMessage","mjNotUseProxy","isMjTranslate","isGeneratePromptReference","mjTranslatePrompt","isDalleChat","openaiVoice","isConvertToBase64","drawingStyles"]});s.data.drawingStyles?v.value=s.data.drawingStyles.split(","):v.value=[];const{openaiBaseUrl:t="",openaiBaseKey:V="",openaiTimeout:T=300,openaiTemperature:P=1,isMjTranslate:p="",isGeneratePromptReference:c=0,mjNotSaveImg:f,mjProxyImgUrl:r,mjNotUseProxy:u,mjTranslatePrompt:d,isDalleChat:y,openaiVoice:C,isConvertToBase64:U}=s.data;Object.assign(o,{openaiBaseUrl:t,openaiBaseKey:V,openaiTimeout:T,isMjTranslate:p,isGeneratePromptReference:c,openaiTemperature:P,mjNotSaveImg:f,mjProxyImgUrl:r,mjNotUseProxy:u,mjTranslatePrompt:d,isDalleChat:y,openaiVoice:C,isConvertToBase64:U})}function $(){var s;(s=S.value)==null||s.validate(async t=>{if(t){try{await O.setConfig({settings:z(o)}),A.success("变更配置信息成功")}catch{}B()}else A.error("请填写完整信息")})}function z(s){return o.drawingStyles=v.value.join(","),Object.keys(s).map(t=>({configKey:t,configVal:s[t]}))}function I(){const s=j.value.trim();s&&v.value.push(s),w.value=!1,j.value=""}function F(s){v.value.splice(s,1)}function H(){w.value=!0,ae(()=>{N.value.focus()})}return le(()=>{B()}),(s,t)=>{const V=oe,T=ne,P=Y,p=i("el-switch"),c=i("el-icon"),f=i("el-tooltip"),r=i("el-form-item"),u=i("el-col"),d=i("el-row"),y=i("el-input"),C=i("el-tag"),U=i("el-button"),L=i("el-divider"),J=i("el-option"),Q=i("el-select"),W=i("el-form"),X=i("el-card");return m(),k("div",null,[e(P,null,{title:l(()=>[ie]),content:l(()=>[re]),default:l(()=>[e(T,{text:"",outline:"",onClick:$},{default:l(()=>[e(V,{name:"i-ri:file-text-line"}),g(" 保存设置 ")]),_:1})]),_:1}),e(X,{style:{margin:"20px"}},{default:l(()=>[e(W,{ref_key:"formRef",ref:S,rules:G.value,model:o,"label-width":"220px"},{default:l(()=>[ue,e(d,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"不存储图片",prop:"mjNotSaveImg","label-width":"120"},{default:l(()=>[e(p,{modelValue:o.mjNotSaveImg,"onUpdate:modelValue":t[0]||(t[0]=a=>o.mjNotSaveImg=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(f,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[de]),default:l(()=>[e(c,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(b(h))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"不使用代理",prop:"mjNotUseProxy","label-width":"120"},{default:l(()=>[e(p,{modelValue:o.mjNotUseProxy,"onUpdate:modelValue":t[1]||(t[1]=a=>o.mjNotUseProxy=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(f,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[me]),default:l(()=>[e(c,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(b(h))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),[0].includes(Number(o.mjNotUseProxy))?(m(),x(d,{key:0},{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"反代地址",prop:"mjProxyImgUrl","label-width":"120px"},{default:l(()=>[e(y,{modelValue:o.mjProxyImgUrl,"onUpdate:modelValue":t[2]||(t[2]=a=>o.mjProxyImgUrl=a),placeholder:"Midjourney 反代地址，为空将直接使用原链接",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):q("",!0),e(d,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"提示词优化",prop:"isMjTranslate","label-width":"120"},{default:l(()=>[e(p,{modelValue:o.isMjTranslate,"onUpdate:modelValue":t[3]||(t[3]=a=>o.isMjTranslate=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(f,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[pe]),default:l(()=>[e(c,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(b(h))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),[1].includes(Number(o.isMjTranslate))?(m(),x(d,{key:1},{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"优化 Prompt",prop:"mjTranslatePrompt","label-width":"120px"},{default:l(()=>[e(y,{type:"textarea",rows:5,modelValue:o.mjTranslatePrompt,"onUpdate:modelValue":t[4]||(t[4]=a=>o.mjTranslatePrompt=a),placeholder:"Midjourney 翻译/联想提示词",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):q("",!0),e(d,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"连续绘画",prop:"isDalleChat","label-width":"120"},{default:l(()=>[e(p,{modelValue:o.isDalleChat,"onUpdate:modelValue":t[5]||(t[5]=a=>o.isDalleChat=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(f,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[ce]),default:l(()=>[e(c,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(b(h))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(d,{class:"mt-2"},{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"绘图风格显示","label-width":"120",prop:"drawingStyles"},{default:l(()=>[n("div",fe,[(m(!0),k(D,null,R(v.value,(a,M)=>(m(),x(C,{key:M,closable:"",style:{"margin-bottom":"10px"},onClose:ye=>F(M)},{default:l(()=>[g(se(a),1)]),_:2},1032,["onClose"]))),128)),w.value?(m(),x(y,{key:0,ref_key:"inputRef",ref:N,modelValue:j.value,"onUpdate:modelValue":t[6]||(t[6]=a=>j.value=a),size:"small",style:{"margin-left":"10px",width:"auto","min-width":"80px"},onKeyup:te(I,["enter"]),onBlur:I},null,8,["modelValue"])):(m(),x(U,{key:1,size:"small",style:{"margin-left":"10px"},onClick:H},{default:l(()=>[g(" + 添加风格 ")]),_:1}))])]),_:1})]),_:1})]),_:1}),e(L),_e,e(d,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"Base64 识图",prop:"isConvertToBase64","label-width":"120"},{default:l(()=>[e(p,{modelValue:o.isConvertToBase64,"onUpdate:modelValue":t[7]||(t[7]=a=>o.isConvertToBase64=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(f,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[ge]),default:l(()=>[e(c,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(b(h))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"TTS 音色",prop:"openaiVoice","label-width":"120px"},{default:l(()=>[e(Q,{modelValue:o.openaiVoice,"onUpdate:modelValue":t[8]||(t[8]=a=>o.openaiVoice=a),placeholder:"选择或输入 openai 语音合成的默认发音人",clearable:"",filterable:"","allow-create":""},{default:l(()=>[(m(!0),k(D,null,R(E.value,a=>(m(),x(J,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof K=="function"&&K(ve);export{ve as default};
